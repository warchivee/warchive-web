import{r as f,j as o,h as R,c as N,T as h,B as m,e as k,i as $,M as B,f as K,d as F}from"./index-8lqxq6O5.js";import{T as D,u as v,D as g,w as W,b as q,W as H}from"./wata.atom-x-nxDV2Z.js";import{I as L}from"./index-s2-TJZVz.js";import{g as X}from"./shareUrlShroter.util-EpyzeZi8.js";function Y({isOpen:e,onConfirm:t=()=>{},onClose:n}){const[r,a]=f.useState("");return f.useEffect(()=>{e&&a("")},[e]),o.jsx(R,{isOpen:e,title:"컬렉션 추가하기",message:"새로 만들 컬렉션의 이름을 입력해주세요.",onConfirm:()=>t(r),onClose:n,buttons:["confirm","cancel"],children:o.jsx(L,{value:r,onChange:a,border:"underline",maxLength:D})})}function G({selectIndex:e,isEditMode:t,handleChange:n}){const{collections:r,addCollection:a,removeCollection:i}=v(),[s,l]=f.useState(!1),[u,p]=f.useState(!1);return o.jsxs("div",{className:"menu",children:[o.jsx("ul",{children:r==null?void 0:r.map((c,d)=>o.jsx("li",{className:N({active:c.title===r[e].title}),onClick:()=>n(d),"aria-hidden":"true",children:o.jsx(h,{color:"white",children:c.title})},`bookmark-list-${c.title}`))}),t?null:o.jsxs("div",{className:"control",children:[o.jsx(m,{icon:"plus",iconColor:"white",labelColor:"white",border:"round",size:"small",onClick:()=>{p(!0)}}),e!==g&&o.jsx(m,{icon:"minus",iconColor:"white",labelColor:"white",border:"round",size:"small",onClick:()=>{l(!0)}})]}),o.jsx(Y,{isOpen:u,onClose:()=>p(!1),onConfirm:c=>{try{a(c||""),n(r.length)}catch{}p(!1)}}),o.jsx(R,{title:"컬렉션 삭제하기",message:"컬렉션을 정말 삭제하시겠습니까? 컬렉션에 추가한 작품들까지 전부 삭제됩니다.",isOpen:s,onClose:()=>{l(!1)},onConfirm:()=>{try{i(e),n(e-1)}catch{}l(!1)},buttons:["confirm","cancel"]})]})}function J({isEditMode:e,selectIndex:t,handleEditMode:n}){const{collections:r,renameCollection:a}=v(),[i,s]=f.useState("");return f.useEffect(()=>{e&&s(r[t].title)},[t,e]),o.jsxs("div",{className:"header",children:[e?o.jsx(L,{value:i,type:"text",border:"underline",onChange:s,size:"big",maxLength:D}):o.jsx(k,{type:"h1",children:r[t].title}),e?null:o.jsx(k,{type:"h2",color:"light-violet",children:r[t].items.length}),e&&t!==g?o.jsxs(o.Fragment,{children:[o.jsx(m,{size:"small",border:"round",background:"light-violet",labelColor:"french-lilac",onClick:()=>{a(t,i),n(!1),s("")},children:"완료"}),o.jsx(m,{size:"small",border:"round",background:"light-violet",labelColor:"french-lilac",onClick:()=>{n(!1),s("")},children:"취소"})]}):t!==g&&o.jsx("div",{className:"edit",children:o.jsx(m,{icon:"write",iconColor:"light-violet",onClick:()=>{n(!0)}})})]})}var x={},Q=function(){var e=document.getSelection();if(!e.rangeCount)return function(){};for(var t=document.activeElement,n=[],r=0;r<e.rangeCount;r++)n.push(e.getRangeAt(r));switch(t.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":t.blur();break;default:t=null;break}return e.removeAllRanges(),function(){e.type==="Caret"&&e.removeAllRanges(),e.rangeCount||n.forEach(function(a){e.addRange(a)}),t&&t.focus()}},V=Q,S={"text/plain":"Text","text/html":"Url",default:"Text"},Z="Copy to clipboard: #{key}, Enter";function ee(e){var t=(/mac os x/i.test(navigator.userAgent)?"⌘":"Ctrl")+"+C";return e.replace(/#{\s*key\s*}/g,t)}function te(e,t){var n,r,a,i,s,l,u=!1;t||(t={}),n=t.debug||!1;try{a=V(),i=document.createRange(),s=document.getSelection(),l=document.createElement("span"),l.textContent=e,l.ariaHidden="true",l.style.all="unset",l.style.position="fixed",l.style.top=0,l.style.clip="rect(0, 0, 0, 0)",l.style.whiteSpace="pre",l.style.webkitUserSelect="text",l.style.MozUserSelect="text",l.style.msUserSelect="text",l.style.userSelect="text",l.addEventListener("copy",function(c){if(c.stopPropagation(),t.format)if(c.preventDefault(),typeof c.clipboardData>"u"){n&&console.warn("unable to use e.clipboardData"),n&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var d=S[t.format]||S.default;window.clipboardData.setData(d,e)}else c.clipboardData.clearData(),c.clipboardData.setData(t.format,e);t.onCopy&&(c.preventDefault(),t.onCopy(c.clipboardData))}),document.body.appendChild(l),i.selectNodeContents(l),s.addRange(i);var p=document.execCommand("copy");if(!p)throw new Error("copy command was unsuccessful");u=!0}catch(c){n&&console.error("unable to copy using execCommand: ",c),n&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(t.format||"text",e),t.onCopy&&t.onCopy(window.clipboardData),u=!0}catch(d){n&&console.error("unable to copy using clipboardData: ",d),n&&console.error("falling back to prompt"),r=ee("message"in t?t.message:Z),window.prompt(r,e)}}finally{s&&(typeof s.removeRange=="function"?s.removeRange(i):s.removeAllRanges()),l&&document.body.removeChild(l),a()}return u}var re=te;function j(e){"@babel/helpers - typeof";return j=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},j(e)}Object.defineProperty(x,"__esModule",{value:!0});x.CopyToClipboard=void 0;var b=I(f),ne=I(re),oe=["text","onCopy","options","children"];function I(e){return e&&e.__esModule?e:{default:e}}function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function T(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?P(Object(n),!0).forEach(function(r){_(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function ae(e,t){if(e==null)return{};var n=ie(e,t),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function ie(e,t){if(e==null)return{};var n={},r=Object.keys(e),a,i;for(i=0;i<r.length;i++)a=r[i],!(t.indexOf(a)>=0)&&(n[a]=e[a]);return n}function le(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function se(e,t,n){return t&&E(e.prototype,t),n&&E(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function ce(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&w(e,t)}function w(e,t){return w=Object.setPrototypeOf||function(r,a){return r.__proto__=a,r},w(e,t)}function ue(e){var t=pe();return function(){var r=C(e),a;if(t){var i=C(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return fe(this,a)}}function fe(e,t){if(t&&(j(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return U(e)}function U(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function pe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function C(e){return C=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},C(e)}function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var z=function(e){ce(n,e);var t=ue(n);function n(){var r;le(this,n);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return r=t.call.apply(t,[this].concat(i)),_(U(r),"onClick",function(l){var u=r.props,p=u.text,c=u.onCopy,d=u.children,M=u.options,y=b.default.Children.only(d),A=(0,ne.default)(p,M);c&&c(p,A),y&&y.props&&typeof y.props.onClick=="function"&&y.props.onClick(l)}),r}return se(n,[{key:"render",value:function(){var a=this.props;a.text,a.onCopy,a.options;var i=a.children,s=ae(a,oe),l=b.default.Children.only(i);return b.default.cloneElement(l,T(T({},s),{},{onClick:this.onClick}))}}]),n}(b.default.PureComponent);x.CopyToClipboard=z;_(z,"defaultProps",{onCopy:void 0,options:void 0});var de=x,O=de.CopyToClipboard;O.CopyToClipboard=O;var me=O;const he=$(me),ye=""+new URL("kakaotalk-rP3R7Fw-.png",import.meta.url).href,be=""+new URL("twitter-0p6XY827.png",import.meta.url).href,ge=""+new URL("instagram-caKgd4rI.png",import.meta.url).href,Ce=""+new URL("facebook-BnIIqaxU.png",import.meta.url).href;function ve({isOpen:e,onClose:t,selectIndex:n}){const{collections:r}=v(),a=X(r[n]),i={width:"28px",height:"28px"},s=()=>{B.open({title:"URL 링크 복사",message:"공유 페이지 url 링크가 복사되었습니다."})};return o.jsxs("div",{className:N("sns-share-modal",{close:!e}),children:[o.jsx("div",{className:"arrow"}),o.jsxs("div",{className:"inner",children:[o.jsxs("div",{className:"header",children:[o.jsx("div",{className:"title",children:o.jsx(h,{size:"big",children:"공유하기"})}),o.jsx(m,{icon:"xmark",iconColor:"black",size:"big",onClick:t})]}),o.jsxs("div",{className:"body",children:[o.jsxs("button",{className:"share-group",type:"button",children:[o.jsx("img",{src:ye,alt:"카카오톡으로 공유하기",style:i}),o.jsx(h,{size:"small",children:"카카오톡"})]}),o.jsxs("button",{className:"share-group",onClick:()=>{const l=" ";window.open(`https://twitter.com/intent/tweet?text=${l}&url=${a}`)},type:"button",children:[o.jsx("img",{src:be,alt:"트위터로 공유하기",style:i}),o.jsx(h,{size:"small",children:"트위터"})]}),o.jsxs("button",{className:"share-group",type:"button",children:[o.jsx("img",{src:ge,alt:"인스타그램으로 공유하기",style:i}),o.jsx(h,{size:"small",children:"인스타그램"})]}),o.jsxs("button",{className:"share-group",onClick:()=>{window.open(`http://www.facebook.com/sharer/sharer.php?u=${a}`)},type:"button",children:[o.jsx("img",{src:Ce,alt:"페이스북으로 공유하기",style:i}),o.jsx(h,{size:"small",children:"페이스북"})]}),o.jsx(he,{text:a,onCopy:()=>s(),children:o.jsxs("button",{className:"share-group",type:"button",children:[o.jsx(m,{background:"light-gray",border:"round",icon:"link",iconColor:"black"}),o.jsx(h,{size:"small",children:"링크복사"})]})})]})]})]})}function xe({isEditMode:e,selectIndex:t=0}){const[n,r]=f.useState(!1);return t!==g&&o.jsx("div",{className:"sns",children:!e&&o.jsxs(o.Fragment,{children:[o.jsx(m,{align:"reverse",icon:"share-up",iconColor:"black",background:"light-gray",onClick:()=>r(!0),children:"나만 보기 아까운 작품이 있다면?"}),o.jsx(ve,{isOpen:n,onClose:()=>r(!1),selectIndex:t})]})})}function ke(){const e=K(W),[t,n]=F(q),{collections:r}=v(),[a,i]=f.useState(0),[s,l]=f.useState(!1);return f.useEffect(()=>{l(!1)},[a]),f.useEffect(()=>{n({...t,category:{label:"전체",value:"category-전체"}})},[]),o.jsxs("div",{className:"page collections",children:[o.jsx(G,{isEditMode:s,selectIndex:a,handleChange:i}),o.jsxs("div",{className:"content",children:[o.jsx(J,{isEditMode:s,selectIndex:a,handleEditMode:l}),o.jsx(xe,{isEditMode:s,selectIndex:a}),o.jsx(H,{watas:e.filter(u=>r[a].items.some(p=>p===u.id))})]})]})}export{ke as default};
